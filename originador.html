<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Originador - Cadena Génesis</title>
    <link rel="stylesheet" href="css/originador.css">
    <script src="BlockChain.js"></script>
</head>
<body>
    <div class="header">
        <img src="img/cafe-icon.png" class="cafe-icon" alt="Café">
        <h1 style="display:inline;">Originador: Crear Cadena de Café</h1>
        <a href="agregador.html" class="nav-item nav-link active">Agregador</a>
    </div>
    <div class="form-section">
        <form id="genesisForm">
            <label for="chainName">Nombre de la cadena:</label>
            <input type="text" id="chainName" name="chainName" required placeholder="Ej: CafePremium2024">
            <label for="type">Tipo de producto:</label>
            <select id="type" name="type">
                <option value="Café Verde">Café Verde</option>
                <option value="Café Tostado">Café Tostado</option>
                <option value="Otro">Otro</option>
            </select>
            <label for="element">Descripción inicial:</label>
            <input type="text" id="element" name="element" required placeholder="Ej: Lote #123, finca, origen...">
            <button type="submit">Crear Cadena Génesis</button>
        </form>
        <div id="genesisSuccess" class="success" style="display:none;"></div>
    </div>
    <script>
        document.getElementById('genesisForm').onsubmit = function(e) {
            e.preventDefault();
            const name = document.getElementById('chainName').value;
            const typeValue = document.getElementById('type').value;
            const element = document.getElementById('element').value;
            // Crear cadena génesis
            if(window.Blockchain) {
                // Recuperar cadenas de localStorage
                let chains = JSON.parse(localStorage.getItem('chains') || '[]');
                const chain = new window.Blockchain({ nombre: name, tipo: typeValue, descripcion: element });
                chain.name = name;
                chains.push(chain);
                localStorage.setItem('chains', JSON.stringify(chains));
                window.currentChain = chain;
                document.getElementById('genesisSuccess').style.display = 'block';
                document.getElementById('genesisSuccess').textContent = `Cadena "${name}" creada con éxito.`;
            } else {
                alert('BlockChain.js no está cargado correctamente.');
            }
        };
    </script>
</body>
</html>
